{
  "url": "https://docs.crawl4ai.com/extraction/clustring-strategies",
  "timestamp": "2025-02-06T13:23:51.301875",
  "html": "<!DOCTYPE html><html lang=\"en\" style=\"scroll-padding-top: 50px;\"><head>\n    \n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <meta name=\"generator\" content=\"mkdocs-1.6.0, mkdocs-terminal-4.4.0\">\n    \n    <meta name=\"description\" content=\"ðŸš€ðŸ¤– Crawl4AI, Open-source LLM-Friendly Web Crawler &amp; Scraper\"> \n     \n    \n    <link rel=\"canonical\" href=\"https://docs.crawl4ai.com/extraction/clustring-strategies/\"><link rel=\"icon\" type=\"image/png\" sizes=\"192x192\" href=\"../../img/android-chrome-192x192.png\">\n<link rel=\"icon\" type=\"image/png\" sizes=\"512x512\" href=\"../../img/android-chrome-512x512.png\">\n<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"../../img/apple-touch-icon.png\">\n<link rel=\"shortcut icon\" type=\"image/png\" sizes=\"48x48\" href=\"../../img/favicon.ico\">\n<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"../../img/favicon-16x16.png\">\n<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"../../img/favicon-32x32.png\">\n\n\n    \n \n<title>Clustering Strategies - Crawl4AI Documentation (v0.4.3bx)</title>\n\n\n<link href=\"../../css/fontawesome/css/fontawesome.min.css\" rel=\"stylesheet\">\n<link href=\"../../css/fontawesome/css/solid.min.css\" rel=\"stylesheet\">\n<link href=\"../../css/normalize.css\" rel=\"stylesheet\">\n<link href=\"../../css/terminal.css\" rel=\"stylesheet\">\n<link href=\"../../css/theme.css\" rel=\"stylesheet\">\n<link href=\"../../css/theme.tile_grid.css\" rel=\"stylesheet\">\n<link href=\"../../css/theme.footer.css\" rel=\"stylesheet\">\n<!-- dark color palette -->\n<link href=\"../../css/palettes/dark.css\" rel=\"stylesheet\">\n\n<!-- page layout -->\n<style>\n/* initially set page layout to a one column grid */\n.terminal-mkdocs-main-grid {\n    display: grid;\n    grid-column-gap: 1.4em;\n    grid-template-columns: auto;\n    grid-template-rows: auto;\n}\n\n/*  \n*   when side navigation is not hidden, use a two column grid.  \n*   if the screen is too narrow, fall back to the initial one column grid layout.\n*   in this case the main content will be placed under the navigation panel. \n*/\n@media only screen and (min-width: 70em) {\n    .terminal-mkdocs-main-grid {\n        grid-template-columns: 4fr 9fr;\n    }\n}</style>\n\n\n\n    \n    <link href=\"../../assets/styles.css\" rel=\"stylesheet\"> \n    <link href=\"../../assets/highlight.css\" rel=\"stylesheet\"> \n    <link href=\"../../assets/dmvendor.css\" rel=\"stylesheet\">  \n    \n    \n\n    \n    <!-- search css support -->\n<link href=\"../../css/search/bootstrap-modal.css\" rel=\"stylesheet\">\n<!-- search scripts -->\n<script>\n    var base_url = \"../..\",\n    shortcuts = \"{}\";\n</script>\n<script src=\"../../js/jquery/jquery-1.10.1.min.js\" defer=\"\"></script>\n<script src=\"../../js/bootstrap/bootstrap.min.js\" defer=\"\"></script>\n<script src=\"../../js/mkdocs/base.js\" defer=\"\"></script>\n    \n    \n    \n    \n    <script src=\"../../assets/highlight.min.js\"></script>\n    \n    <script src=\"../../assets/highlight_init.js\"></script>\n    \n    <script src=\"https://buttons.github.io/buttons.js\"></script>\n    \n    <script src=\"../../search/main.js\"></script>\n    \n\n    \n</head>\n\n<body class=\"terminal\" style=\"\"><div class=\"container\">\n    <div class=\"terminal-nav\">\n        <header class=\"terminal-logo\">\n            <div id=\"mkdocs-terminal-site-name\" class=\"logo terminal-prompt\"><a href=\"https://docs.crawl4ai.com/\" class=\"no-style\">Crawl4AI Documentation (v0.4.3bx)</a></div>\n        </header>\n        \n        <nav class=\"terminal-menu\">\n            \n            <ul vocab=\"https://schema.org/\" typeof=\"BreadcrumbList\">\n                \n                \n                <li property=\"itemListElement\" typeof=\"ListItem\">\n                    <a href=\"../..\" class=\"menu-item \" property=\"item\" typeof=\"WebPage\">\n                        <span property=\"name\">Home</span>\n                    </a>\n                    <meta property=\"position\" content=\"0\">\n                </li>\n                \n                \n                \n                \n                <li property=\"itemListElement\" typeof=\"ListItem\">\n                    <a href=\"../../core/quickstart/\" class=\"menu-item \" property=\"item\" typeof=\"WebPage\">\n                        <span property=\"name\">Quick Start</span>\n                    </a>\n                    <meta property=\"position\" content=\"1\">\n                </li>\n                \n                \n                \n                \n                \n                \n                \n                \n                \n                \n                \n                    \n                    \n\n\n<li property=\"itemListElement\" typeof=\"ListItem\">\n    <a href=\"#\" class=\"menu-item\" data-toggle=\"modal\" data-target=\"#mkdocs_search_modal\" property=\"item\" typeof=\"SearchAction\">\n        <i aria-hidden=\"true\" class=\"fa fa-search\"></i> <span property=\"name\">Search</span>\n    </a>\n    <meta property=\"position\" content=\"2\">\n</li>\n                    \n            </ul>\n            \n        </nav>\n    </div>\n</div>\n        \n    <div class=\"container\">\n        <div class=\"terminal-mkdocs-main-grid\"><aside id=\"terminal-mkdocs-side-panel\"><nav>\n  \n    <ul class=\"terminal-mkdocs-side-nav-items\">\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../..\">Home</a>\n        \n    \n    \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n        \n        \n\n        \n            \n    \n        \n        \n            \n            \n            <span class=\"\n        \n    \n\n    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index\">Setup &amp; Installation</span>\n        \n    \n    \n        \n      \n        \n            <ul class=\"terminal-mkdocs-side-nav-li-ul\">\n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/installation/\">Installation</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/docker-deploymeny/\">Docker Deployment</a>\n        \n    \n    </li>\n            \n            \n    </ul>\n        \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/quickstart/\">Quick Start</a>\n        \n    \n    \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n        \n        \n\n        \n            \n    \n        \n        \n            \n            \n            <span class=\"\n        \n    \n\n    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index\">Blog &amp; Changelog</span>\n        \n    \n    \n        \n      \n        \n            <ul class=\"terminal-mkdocs-side-nav-li-ul\">\n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../blog/\">Blog Home</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"https://github.com/unclecode/crawl4ai/blob/main/CHANGELOG.md\">Changelog</a>\n        \n    \n    </li>\n            \n            \n    </ul>\n        \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n        \n        \n\n        \n            \n    \n        \n        \n            \n            \n            <span class=\"\n        \n    \n\n    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index\">Core</span>\n        \n    \n    \n        \n      \n        \n            <ul class=\"terminal-mkdocs-side-nav-li-ul\">\n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/simple-crawling/\">Simple Crawling</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/crawler-result/\">Crawler Result</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/browser-crawler-config/\">Browser &amp; Crawler Config</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/markdown-generation/\">Markdown Generation</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/fit-markdown/\">Fit Markdown</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/page-interaction/\">Page Interaction</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/content-selection/\">Content Selection</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/cache-modes/\">Cache Modes</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/local-files/\">Local Files &amp; Raw HTML</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../core/link-media/\">Link &amp; Media</a>\n        \n    \n    </li>\n            \n            \n    </ul>\n        \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n        \n        \n\n        \n            \n    \n        \n        \n            \n            \n            <span class=\"\n        \n    \n\n    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index\">Advanced</span>\n        \n    \n    \n        \n      \n        \n            <ul class=\"terminal-mkdocs-side-nav-li-ul\">\n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/advanced-features/\">Overview</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/file-downloading/\">File Downloading</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/lazy-loading/\">Lazy Loading</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/hooks-auth/\">Hooks &amp; Auth</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/proxy-security/\">Proxy &amp; Security</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/session-management/\">Session Management</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/multi-url-crawling/\">Multi-URL Crawling</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/crawl-dispatcher/\">Crawl Dispatcher</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/identity-based-crawling/\">Identity Based Crawling</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../advanced/ssl-certificate/\">SSL Certificate</a>\n        \n    \n    </li>\n            \n            \n    </ul>\n        \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n        \n        \n\n        \n            \n    \n        \n        <span class=\"\n        \n    \n\n    terminal-mkdocs-side-nav-item--active terminal-mkdocs-side-nav-section-no-index\">Extraction</span>\n    \n    \n        \n      \n        \n            <ul class=\"terminal-mkdocs-side-nav-li-ul\">\n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../no-llm-strategies/\">LLM-Free Strategies</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../llm-strategies/\">LLM Strategies</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        <span class=\"\n\n    terminal-mkdocs-side-nav-item--active\">Clustering Strategies</span>\n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../chunking/\">Chunking</a>\n        \n    \n    </li>\n            \n            \n    </ul>\n        \n    \n  </li>\n        \n          \n\n\n\n<li class=\"terminal-mkdocs-side-nav-li\">\n    \n    \n        \n        \n\n        \n            \n    \n        \n        \n            \n            \n            <span class=\"\n        \n    \n\n    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index\">API Reference</span>\n        \n    \n    \n        \n      \n        \n            <ul class=\"terminal-mkdocs-side-nav-li-ul\">\n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../api/async-webcrawler/\">AsyncWebCrawler</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../api/arun/\">arun()</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../api/arun_many/\">arun_many()</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../api/parameters/\">Browser &amp; Crawler Config</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../api/crawl-result/\">CrawlResult</a>\n        \n    \n    </li>\n            \n        \n            \n            \n\n             \n                <li class=\"terminal-mkdocs-side-nav-li-ul-li\">\n    \n        \n        \n            <a class=\"\n\n    terminal-mkdocs-side-nav-item\" href=\"../../api/strategies/\">Strategies</a>\n        \n    \n    </li>\n            \n            \n    </ul>\n        \n    \n  </li>\n        \n    </ul>\n  \n</nav><hr>\n<nav>\n    <ul>\n        <li><a href=\"#cosine-strategy\">Cosine Strategy</a></li>\n        <li><a href=\"#how-it-works\">How It Works</a></li><li><a href=\"#basic-usage\">Basic Usage</a></li><li><a href=\"#configuration-options\">Configuration Options</a></li><li><a href=\"#use-cases\">Use Cases</a></li><li><a href=\"#advanced-features\">Advanced Features</a></li><li><a href=\"#best-practices\">Best Practices</a></li><li><a href=\"#error-handling\">Error Handling</a></li>\n    </ul>\n</nav>\n</aside>\n            <main id=\"terminal-mkdocs-main-content\">\n<section id=\"mkdocs-terminal-content\">\n    <h1 id=\"cosine-strategy\">Cosine Strategy</h1>\n<p>The Cosine Strategy in Crawl4AI uses similarity-based clustering to identify and extract relevant content sections from web pages. This strategy is particularly useful when you need to find and extract content based on semantic similarity rather than structural patterns.</p>\n<h2 id=\"how-it-works\">How It Works</h2>\n<p>The Cosine Strategy:\n1. Breaks down page content into meaningful chunks\n2. Converts text into vector representations\n3. Calculates similarity between chunks\n4. Clusters similar content together\n5. Ranks and filters content based on relevance</p>\n<h2 id=\"basic-usage\">Basic Usage</h2>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-csharp\"><span class=\"hljs-keyword\">from</span> crawl4ai.extraction_strategy import CosineStrategy\n\nstrategy = CosineStrategy(\n    semantic_filter=<span class=\"hljs-string\">\"product reviews\"</span>,    <span class=\"hljs-meta\"># Target content type</span>\n    word_count_threshold=<span class=\"hljs-number\">10</span>,             <span class=\"hljs-meta\"># Minimum words per cluster</span>\n    sim_threshold=<span class=\"hljs-number\">0.3</span>                    <span class=\"hljs-meta\"># Similarity threshold</span>\n)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">with</span> <span class=\"hljs-title\">AsyncWebCrawler</span>() <span class=\"hljs-keyword\">as</span> crawler:\n    result</span> = <span class=\"hljs-keyword\">await</span> crawler.arun(\n        url=<span class=\"hljs-string\">\"https://example.com/reviews\"</span>,\n        extraction_strategy=strategy\n    )\n\n    content = result.extracted_content\n</code></pre></div>\n<h2 id=\"configuration-options\">Configuration Options</h2>\n<h3 id=\"core-parameters\">Core Parameters</h3>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-python\">CosineStrategy(\n    <span class=\"hljs-comment\"># Content Filtering</span>\n    semantic_filter: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-literal\">None</span>,       <span class=\"hljs-comment\"># Keywords/topic for content filtering</span>\n    word_count_threshold: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">10</span>,    <span class=\"hljs-comment\"># Minimum words per cluster</span>\n    sim_threshold: <span class=\"hljs-built_in\">float</span> = <span class=\"hljs-number\">0.3</span>,        <span class=\"hljs-comment\"># Similarity threshold (0.0 to 1.0)</span>\n\n    <span class=\"hljs-comment\"># Clustering Parameters</span>\n    max_dist: <span class=\"hljs-built_in\">float</span> = <span class=\"hljs-number\">0.2</span>,            <span class=\"hljs-comment\"># Maximum distance for clustering</span>\n    linkage_method: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">'ward'</span>,      <span class=\"hljs-comment\"># Clustering linkage method</span>\n    top_k: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">3</span>,                   <span class=\"hljs-comment\"># Number of top categories to extract</span>\n\n    <span class=\"hljs-comment\"># Model Configuration</span>\n    model_name: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">'sentence-transformers/all-MiniLM-L6-v2'</span>,  <span class=\"hljs-comment\"># Embedding model</span>\n\n    verbose: <span class=\"hljs-built_in\">bool</span> = <span class=\"hljs-literal\">False</span>             <span class=\"hljs-comment\"># Enable logging</span>\n)\n</code></pre></div>\n<h3 id=\"parameter-details\">Parameter Details</h3>\n<p>1.â€€<strong>semantic_filter</strong>\n   - Sets the target topic or content type\n   - Use keywords relevant to your desired content\n   - Example: \"technical specifications\", \"user reviews\", \"pricing information\"</p>\n<p>2.â€€<strong>sim_threshold</strong>\n   - Controls how similar content must be to be grouped together\n   - Higher values (e.g., 0.8) mean stricter matching\n   - Lower values (e.g., 0.3) allow more variation\n   </p><div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-ini\"><span class=\"hljs-comment\"># Strict matching</span>\n<span class=\"hljs-attr\">strategy</span> = CosineStrategy(sim_threshold=<span class=\"hljs-number\">0.8</span>)\n\n<span class=\"hljs-comment\"># Loose matching</span>\n<span class=\"hljs-attr\">strategy</span> = CosineStrategy(sim_threshold=<span class=\"hljs-number\">0.3</span>)\n</code></pre></div><p></p>\n<p>3.â€€<strong>word_count_threshold</strong>\n   - Filters out short content blocks\n   - Helps eliminate noise and irrelevant content\n   </p><div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-ini\"><span class=\"hljs-comment\"># Only consider substantial paragraphs</span>\n<span class=\"hljs-attr\">strategy</span> = CosineStrategy(word_count_threshold=<span class=\"hljs-number\">50</span>)\n</code></pre></div><p></p>\n<p>4.â€€<strong>top_k</strong>\n   - Number of top content clusters to return\n   - Higher values return more diverse content\n   </p><div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-ini\"><span class=\"hljs-comment\"># Get top 5 most relevant content clusters</span>\n<span class=\"hljs-attr\">strategy</span> = CosineStrategy(top_k=<span class=\"hljs-number\">5</span>)\n</code></pre></div><p></p>\n<h2 id=\"use-cases\">Use Cases</h2>\n<h3 id=\"1-article-content-extraction\">1. Article Content Extraction</h3>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-makefile\">strategy = CosineStrategy(\n    semantic_filter=<span class=\"hljs-string\">\"main article content\"</span>,\n    word_count_threshold=100,  <span class=\"hljs-comment\"># Longer blocks for articles</span>\n    top_k=1                   <span class=\"hljs-comment\"># Usually want single main content</span>\n)\n\nresult = await crawler.arun(\n    url=<span class=\"hljs-string\">\"https://example.com/blog/post\"</span>,\n    extraction_strategy=strategy\n)\n</code></pre></div>\n<h3 id=\"2-product-review-analysis\">2. Product Review Analysis</h3>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-makefile\">strategy = CosineStrategy(\n    semantic_filter=<span class=\"hljs-string\">\"customer reviews and ratings\"</span>,\n    word_count_threshold=20,   <span class=\"hljs-comment\"># Reviews can be shorter</span>\n    top_k=10,                 <span class=\"hljs-comment\"># Get multiple reviews</span>\n    sim_threshold=0.4         <span class=\"hljs-comment\"># Allow variety in review content</span>\n)\n</code></pre></div>\n<h3 id=\"3-technical-documentation\">3. Technical Documentation</h3>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-makefile\">strategy = CosineStrategy(\n    semantic_filter=<span class=\"hljs-string\">\"technical specifications documentation\"</span>,\n    word_count_threshold=30,\n    sim_threshold=0.6,        <span class=\"hljs-comment\"># Stricter matching for technical content</span>\n    max_dist=0.3             <span class=\"hljs-comment\"># Allow related technical sections</span>\n)\n</code></pre></div>\n<h2 id=\"advanced-features\">Advanced Features</h2>\n<h3 id=\"custom-clustering\">Custom Clustering</h3>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-bash\">strategy = CosineStrategy(\n    linkage_method=<span class=\"hljs-string\">'complete'</span>,  <span class=\"hljs-comment\"># Alternative clustering method</span>\n    max_dist=0.4,              <span class=\"hljs-comment\"># Larger clusters</span>\n    model_name=<span class=\"hljs-string\">'sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2'</span>  <span class=\"hljs-comment\"># Multilingual support</span>\n)\n</code></pre></div>\n<h3 id=\"content-filtering-pipeline\">Content Filtering Pipeline</h3>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-python\">strategy = CosineStrategy(\n    semantic_filter=<span class=\"hljs-string\">\"pricing plans features\"</span>,\n    word_count_threshold=<span class=\"hljs-number\">15</span>,\n    sim_threshold=<span class=\"hljs-number\">0.5</span>,\n    top_k=<span class=\"hljs-number\">3</span>\n)\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">extract_pricing_features</span>(<span class=\"hljs-params\">url: <span class=\"hljs-built_in\">str</span></span>):\n    <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">with</span> AsyncWebCrawler() <span class=\"hljs-keyword\">as</span> crawler:\n        result = <span class=\"hljs-keyword\">await</span> crawler.arun(\n            url=url,\n            extraction_strategy=strategy\n        )\n\n        <span class=\"hljs-keyword\">if</span> result.success:\n            content = json.loads(result.extracted_content)\n            <span class=\"hljs-keyword\">return</span> {\n                <span class=\"hljs-string\">'pricing_features'</span>: content,\n                <span class=\"hljs-string\">'clusters'</span>: <span class=\"hljs-built_in\">len</span>(content),\n                <span class=\"hljs-string\">'similarity_scores'</span>: [item[<span class=\"hljs-string\">'score'</span>] <span class=\"hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> content]\n            }\n</code></pre></div>\n<h2 id=\"best-practices\">Best Practices</h2>\n<p>1.â€€<strong>Adjust Thresholds Iteratively</strong>\n   - Start with default values\n   - Adjust based on results\n   - Monitor clustering quality</p>\n<p>2.â€€<strong>Choose Appropriate Word Count Thresholds</strong>\n   - Higher for articles (100+)\n   - Lower for reviews/comments (20+)\n   - Medium for product descriptions (50+)</p>\n<p>3.â€€<strong>Optimize Performance</strong>\n   </p><div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-graphql\">strategy <span class=\"hljs-punctuation\">=</span> CosineStrategy<span class=\"hljs-punctuation\">(</span>\n    word_count_threshold<span class=\"hljs-punctuation\">=</span><span class=\"hljs-number\">10</span>,  <span class=\"hljs-comment\"># Filter early</span>\n    top_k<span class=\"hljs-punctuation\">=</span><span class=\"hljs-number\">5</span>,                 <span class=\"hljs-comment\"># Limit results</span>\n    verbose<span class=\"hljs-punctuation\">=</span><span class=\"hljs-literal\">True</span>             <span class=\"hljs-comment\"># Monitor performance</span>\n<span class=\"hljs-punctuation\">)</span>\n</code></pre></div><p></p>\n<p>4.â€€<strong>Handle Different Content Types</strong>\n   </p><div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-makefile\"><span class=\"hljs-comment\"># For mixed content pages</span>\nstrategy = CosineStrategy(\n    semantic_filter=<span class=\"hljs-string\">\"product features\"</span>,\n    sim_threshold=0.4,      <span class=\"hljs-comment\"># More flexible matching</span>\n    max_dist=0.3,          <span class=\"hljs-comment\"># Larger clusters</span>\n    top_k=3                <span class=\"hljs-comment\"># Multiple relevant sections</span>\n)\n</code></pre></div><p></p>\n<h2 id=\"error-handling\">Error Handling</h2>\n<div class=\"highlight\"><pre><span></span><code data-highlighted=\"yes\" class=\"hljs language-python\"><span class=\"hljs-keyword\">try</span>:\n    result = <span class=\"hljs-keyword\">await</span> crawler.arun(\n        url=<span class=\"hljs-string\">\"https://example.com\"</span>,\n        extraction_strategy=strategy\n    )\n\n    <span class=\"hljs-keyword\">if</span> result.success:\n        content = json.loads(result.extracted_content)\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> content:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"No relevant content found\"</span>)\n    <span class=\"hljs-keyword\">else</span>:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"Extraction failed: <span class=\"hljs-subst\">{result.error_message}</span>\"</span>)\n\n<span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"Error during extraction: <span class=\"hljs-subst\">{<span class=\"hljs-built_in\">str</span>(e)}</span>\"</span>)\n</code></pre></div>\n<p>The Cosine Strategy is particularly effective when:\n- Content structure is inconsistent\n- You need semantic understanding\n- You want to find similar content blocks\n- Structure-based extraction (CSS/XPath) isn't reliable</p>\n<p>It works well with other strategies and can be used as a pre-processing step for LLM-based extraction.</p>\n</section>\n\n            </main>\n        </div>\n        <hr><footer>\n    <div class=\"terminal-mkdocs-footer-grid\">\n        <div id=\"terminal-mkdocs-footer-copyright-info\">\n             Site built with <a href=\"http://www.mkdocs.org\">MkDocs</a> and <a href=\"https://github.com/ntno/mkdocs-terminal\">Terminal for MkDocs</a>.\n        </div>\n    </div>\n</footer>\n    </div>\n\n    \n    <div class=\"modal\" id=\"mkdocs_search_modal\" tabindex=\"-1\" role=\"alertdialog\" aria-modal=\"true\" aria-labelledby=\"searchModalLabel\">\n    <div class=\"modal-dialog modal-lg\" role=\"search\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\" id=\"searchModalLabel\">Search</h5>\n                <button type=\"button\" class=\"close btn btn-default btn-ghost\" data-dismiss=\"modal\"><span aria-hidden=\"true\">x</span><span class=\"sr-only\">Close</span></button>\n            </div>\n            <div class=\"modal-body\">\n                <p id=\"searchInputLabel\">Type to start searching</p>\n                <form>\n                    <div class=\"form-group\">\n                        <input type=\"search\" class=\"form-control\" aria-labelledby=\"searchInputLabel\" placeholder=\"\" id=\"mkdocs-search-query\" title=\"Please enter search terms here\">\n                    </div>\n                </form>\n                <div id=\"mkdocs-search-results\" data-no-results-text=\"No document matches found\"></div>\n            </div>\n            <div class=\"modal-footer\">\n            </div>\n        </div>\n    </div>\n</div>\n    \n    \n\n\n</body></html>",
  "markdown": "# Cosine Strategy\nThe Cosine Strategy in Crawl4AI uses similarity-based clustering to identify and extract relevant content sections from web pages. This strategy is particularly useful when you need to find and extract content based on semantic similarity rather than structural patterns.\n## How It Works\nThe Cosine Strategy: 1. Breaks down page content into meaningful chunks 2. Converts text into vector representations 3. Calculates similarity between chunks 4. Clusters similar content together 5. Ranks and filters content based on relevance\n## Basic Usage\n```\nfrom crawl4ai.extraction_strategy import CosineStrategy\nstrategy = CosineStrategy(\n  semantic_filter=\"product reviews\",  # Target content type\n  word_count_threshold=10,       # Minimum words per cluster\n  sim_threshold=0.3          # Similarity threshold\n)\nasync with AsyncWebCrawler() as crawler:\n  result = await crawler.arun(\n    url=\"https://example.com/reviews\",\n    extraction_strategy=strategy\n  )\n  content = result.extracted_content\n\n```\n\n## Configuration Options\n### Core Parameters\n```\nCosineStrategy(\n  # Content Filtering\n  semantic_filter: str = None,    # Keywords/topic for content filtering\n  word_count_threshold: int = 10,  # Minimum words per cluster\n  sim_threshold: float = 0.3,    # Similarity threshold (0.0 to 1.0)\n  # Clustering Parameters\n  max_dist: float = 0.2,      # Maximum distance for clustering\n  linkage_method: str = 'ward',   # Clustering linkage method\n  top_k: int = 3,          # Number of top categories to extract\n  # Model Configuration\n  model_name: str = 'sentence-transformers/all-MiniLM-L6-v2', # Embedding model\n  verbose: bool = False       # Enable logging\n)\n\n```\n\n### Parameter Details\n1. **semantic_filter** - Sets the target topic or content type - Use keywords relevant to your desired content - Example: \"technical specifications\", \"user reviews\", \"pricing information\"\n2. **sim_threshold** - Controls how similar content must be to be grouped together - Higher values (e.g., 0.8) mean stricter matching - Lower values (e.g., 0.3) allow more variation \n```\n# Strict matching\nstrategy = CosineStrategy(sim_threshold=0.8)\n# Loose matching\nstrategy = CosineStrategy(sim_threshold=0.3)\n\n```\n\n3. **word_count_threshold** - Filters out short content blocks - Helps eliminate noise and irrelevant content \n```\n# Only consider substantial paragraphs\nstrategy = CosineStrategy(word_count_threshold=50)\n\n```\n\n4. **top_k** - Number of top content clusters to return - Higher values return more diverse content \n```\n# Get top 5 most relevant content clusters\nstrategy = CosineStrategy(top_k=5)\n\n```\n\n## Use Cases\n### 1. Article Content Extraction\n```\nstrategy = CosineStrategy(\n  semantic_filter=\"main article content\",\n  word_count_threshold=100, # Longer blocks for articles\n  top_k=1          # Usually want single main content\n)\nresult = await crawler.arun(\n  url=\"https://example.com/blog/post\",\n  extraction_strategy=strategy\n)\n\n```\n\n### 2. Product Review Analysis\n```\nstrategy = CosineStrategy(\n  semantic_filter=\"customer reviews and ratings\",\n  word_count_threshold=20,  # Reviews can be shorter\n  top_k=10,         # Get multiple reviews\n  sim_threshold=0.4     # Allow variety in review content\n)\n\n```\n\n### 3. Technical Documentation\n```\nstrategy = CosineStrategy(\n  semantic_filter=\"technical specifications documentation\",\n  word_count_threshold=30,\n  sim_threshold=0.6,    # Stricter matching for technical content\n  max_dist=0.3       # Allow related technical sections\n)\n\n```\n\n## Advanced Features\n### Custom Clustering\n```\nstrategy = CosineStrategy(\n  linkage_method='complete', # Alternative clustering method\n  max_dist=0.4,       # Larger clusters\n  model_name='sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2' # Multilingual support\n)\n\n```\n\n### Content Filtering Pipeline\n```\nstrategy = CosineStrategy(\n  semantic_filter=\"pricing plans features\",\n  word_count_threshold=15,\n  sim_threshold=0.5,\n  top_k=3\n)\nasync def extract_pricing_features(url: str):\n  async with AsyncWebCrawler() as crawler:\n    result = await crawler.arun(\n      url=url,\n      extraction_strategy=strategy\n    )\n    if result.success:\n      content = json.loads(result.extracted_content)\n      return {\n        'pricing_features': content,\n        'clusters': len(content),\n        'similarity_scores': [item['score'] for item in content]\n      }\n\n```\n\n## Best Practices\n1. **Adjust Thresholds Iteratively** - Start with default values - Adjust based on results - Monitor clustering quality\n2. **Choose Appropriate Word Count Thresholds** - Higher for articles (100+) - Lower for reviews/comments (20+) - Medium for product descriptions (50+)\n3. **Optimize Performance**\n```\nstrategy = CosineStrategy(\n  word_count_threshold=10, # Filter early\n  top_k=5,         # Limit results\n  verbose=True       # Monitor performance\n)\n\n```\n\n4. **Handle Different Content Types**\n```\n# For mixed content pages\nstrategy = CosineStrategy(\n  semantic_filter=\"product features\",\n  sim_threshold=0.4,   # More flexible matching\n  max_dist=0.3,     # Larger clusters\n  top_k=3        # Multiple relevant sections\n)\n\n```\n\n## Error Handling\n```\ntry:\n  result = await crawler.arun(\n    url=\"https://example.com\",\n    extraction_strategy=strategy\n  )\n  if result.success:\n    content = json.loads(result.extracted_content)\n    if not content:\n      print(\"No relevant content found\")\n  else:\n    print(f\"Extraction failed: {result.error_message}\")\nexcept Exception as e:\n  print(f\"Error during extraction: {str(e)}\")\n\n```\n\nThe Cosine Strategy is particularly effective when: - Content structure is inconsistent - You need semantic understanding - You want to find similar content blocks - Structure-based extraction (CSS/XPath) isn't reliable\nIt works well with other strategies and can be used as a pre-processing step for LLM-based extraction.\n##### Search\nxClose\nType to start searching\n",
  "links": [
    "https://docs.crawl4ai.com",
    "https://docs.crawl4ai.com/advanced/advanced-features",
    "https://docs.crawl4ai.com/advanced/crawl-dispatcher",
    "https://docs.crawl4ai.com/advanced/file-downloading",
    "https://docs.crawl4ai.com/advanced/hooks-auth",
    "https://docs.crawl4ai.com/advanced/identity-based-crawling",
    "https://docs.crawl4ai.com/advanced/lazy-loading",
    "https://docs.crawl4ai.com/advanced/multi-url-crawling",
    "https://docs.crawl4ai.com/advanced/proxy-security",
    "https://docs.crawl4ai.com/advanced/session-management",
    "https://docs.crawl4ai.com/advanced/ssl-certificate",
    "https://docs.crawl4ai.com/api/arun",
    "https://docs.crawl4ai.com/api/arun_many",
    "https://docs.crawl4ai.com/api/async-webcrawler",
    "https://docs.crawl4ai.com/api/crawl-result",
    "https://docs.crawl4ai.com/api/parameters",
    "https://docs.crawl4ai.com/api/strategies",
    "https://docs.crawl4ai.com/blog",
    "https://docs.crawl4ai.com/chunking",
    "https://docs.crawl4ai.com/core/browser-crawler-config",
    "https://docs.crawl4ai.com/core/cache-modes",
    "https://docs.crawl4ai.com/core/content-selection",
    "https://docs.crawl4ai.com/core/crawler-result",
    "https://docs.crawl4ai.com/core/docker-deploymeny",
    "https://docs.crawl4ai.com/core/fit-markdown",
    "https://docs.crawl4ai.com/core/installation",
    "https://docs.crawl4ai.com/core/link-media",
    "https://docs.crawl4ai.com/core/local-files",
    "https://docs.crawl4ai.com/core/markdown-generation",
    "https://docs.crawl4ai.com/core/page-interaction",
    "https://docs.crawl4ai.com/core/quickstart",
    "https://docs.crawl4ai.com/core/simple-crawling",
    "https://docs.crawl4ai.com/llm-strategies",
    "https://docs.crawl4ai.com/no-llm-strategies"
  ],
  "depth": 1,
  "stats": {
    "processed": 28,
    "total": 0,
    "depth": 1,
    "elapsed": "0:00:35",
    "page_limit": 34
  }
}